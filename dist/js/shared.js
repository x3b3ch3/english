"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_unsupportedIterableToArray(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,a,i,u=[],c=!0,l=!1;try{if(a=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;c=!1}else for(;!(c=(n=a.call(t)).done)&&(u.push(n.value),u.length!==r);c=!0);}catch(e){l=!0,o=e}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(l)throw o}}return u}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,r){var t,n,o,a,i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return n=!(t=!0),{s:function(){i=i.call(e)},n:function(){var e=i.next();return t=e.done,e},e:function(e){n=!0,o=e},f:function(){try{t||null==i.return||i.return()}finally{if(n)throw o}}};if(Array.isArray(e)||(i=_unsupportedIterableToArray(e))||r&&e&&"number"==typeof e.length)return i&&(e=i),a=0,{s:r=function(){},n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,r){var t;if(e)return"string"==typeof e?_arrayLikeToArray(e,r):"Map"===(t="Object"===(t=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:t)||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function onDOMLoaded(){var e=new XMLHttpRequest;e.responseType="json",e.onreadystatechange=onXhttpLoaded,e.open("GET","dist/json/shared.json",!0),e.send(),document.querySelector(".correct").onclick=onCorrectClick,document.querySelector(".restart").onclick=onRestartClick}function onXhttpLoaded(e){4==e.target.readyState&&200==e.target.status&&(window.verbs=e.target.response,creatTable((e=getParams()).from,e.to))}function onCorrectClick(){var e,r=document.querySelectorAll("tbody input"),t=_createForOfIteratorHelper(r);try{for(t.s();!(e=t.n()).done;){var n,o,a=e.value;a.value&&(o=(n=a.value.toLowerCase().trim().split(",").map(function(e){return e.trim()})).intersect(a.responses.decrypt()).length===n.length,a.className=o?"right":"wrong")}}catch(e){t.e(e)}finally{t.f()}var i=document.querySelectorAll("input.right").length,u=i/r.length,c="",c=u<.4?"Oups, Trop d'erreurs. Tu peux facilement faire mieux":u<.7?"Hum, encore un peu de travail, essaie encore":u<1?"Presque parfait, bravo":"Parfait, tu as fait un sans faute";document.querySelector(".score").innerHTML="Ton résultat : ".concat(i,"/").concat(r.length,", ").concat(c)}function onRestartClick(){var e=document.querySelector(".from").value,r=document.querySelector(".to").value;window.location.hash="#?from=".concat(e,"&to=").concat(r),creatTable(e,r)}function getParams(){var e=window.location.hash&&window.location.hash.includes("?")?window.location.hash.split("#?")[1].split("&").map(function(e){e=_slicedToArray(e.split("="),2);return{key:e[0],value:e[1]}}):[{key:"from",value:0},{key:"to",value:10}],r=+e.find(function(e){return"from"===e.key}).value,e=+e.find(function(e){return"to"===e.key}).value;return window.location.hash||(window.location.hash="#?from=".concat(r,"&to=").concat(e)),{from:r,to:e}}function creatTable(e,r){document.querySelector(".from").value=e,document.querySelector(".to").value=r;var t,n=document.querySelector("tbody"),o=(n.innerHTML="",document.querySelector(".score").innerHTML="",_createForOfIteratorHelper(window.verbs.slice(e,r).sort(function(){return Math.random()-.5})));try{for(o.s();!(t=o.n()).done;){var a,i=t.value,u=document.createElement("tr"),c=(n.appendChild(u),0),l=Math.floor(4*Math.random()),s=_createForOfIteratorHelper(i);try{for(s.s();!(a=s.n()).done;){var y,d=a.value,f=document.createElement("td");c===l?f.innerHTML="<span class='word'>".concat(d.decrypt().toString(),"</span>"):((y=document.createElement("input")).type="text",y.placeholder="Ta réponse?",y.responses=d,f.appendChild(y)),u.appendChild(f),c++}}catch(e){s.e(e)}finally{s.f()}}}catch(e){o.e(e)}finally{o.f()}}document.addEventListener("DOMContentLoaded",onDOMLoaded),String.prototype.decrypt=function(){return CryptoJS.AES.decrypt(this,"secret key 123").toString(CryptoJS.enc.Utf8)},Array.prototype.decrypt=function(){return this.map(function(e){return e.decrypt()})},Array.prototype.intersect=function(t){return this.reduce(function(e,r){return[].concat(_toConsumableArray(t.filter(function(e){return e===r})),_toConsumableArray(e))},[])};